# Item 67 - 최적화는 신중히 하기

#### 최적화
* 보통은 해로운 결과로 이어기지 쉽다.
* 빠른 프로그램 보다는 좋은 프로그램을 작성하자
	* 좋은 프로그램은 정보 은닉 원칙을 따르고, 개별 구성 요소의 내부를 독립적으로 설계할 수 있는 것이다.
	* 나머지에 영향을 주지 않고 각 요소를 설계할 수 있는 프로그램을 짜자
##### 1. 성능을 제한하는 설계를 피하라
* 컴포넌트 간, 외부 시스템과의 소통 방식은 완성 후 변경하기 어렵다.
	* ex. API, 네트워크 프로토콜, 영구 저장용 데이터 포맷

##### 2. API를 설계할 때 성능에 주는 영향을 고려하라.
* public 타입을 가변으로 만들면 불필요한 방어적 복사가 많이 일어날 수 있다.(Item 50)
* 상속보다는 컴포지션을 활용해라. (Item 18)
* 인터페이스로 구현해라.(Item 64)

##### 3. 최적화 시도 전과 후로 성능을 측정해라.
* 최적화를 기점으로 성능을 측정하여 얼마나 영향이 있는지 측정하자
* 일반적으로 90%의 시간을 단 10% 코드에서 사용한다.
* C, C++ 같은 전통적인 언어에서도 중요하지만,
	* 특히, 자바는 성능 모델이 덜 정교하기 때문에 더 중요하다.
		* 시스템, 릴리즈, 프로세서마다 차이가 있다.
	* 프로그래머가 작성하는 코드와 CPU에서 수행하는 명령 사이의 `추상화 격차`가 크다.
		* -> 최적화로 인한 성능 변화를 일정하게 예측하기가 어렵다.
		
##### 4. 프로파일링 도구를 활용하자.
* 최적화 노력을 어디에 집중해야 할지 도움을 준다.
	* 소비시관, 호출 횟수, 런타임 정보 제공
* 프로파일링 도구는 아니지만, JMH가 있다.
	* 자바 코드의 상세한 성능을 알기 쉽게 보여준다.
<!--
```java

```
 -->