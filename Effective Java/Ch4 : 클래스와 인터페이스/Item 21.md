# Item 21 - 인터페이스는 구현하는 쪽을 생각해 설계하기

#### 인터페이스의 수정
* 자바 8 이전
	* 인터페이스에 새로운 메서드가 추가될 것을 고려하지 않는다는 가정 하에 코드를 작성했다.
	* 인터페이스에 메서드를 추가하면 보통은 컴파일 오류가 난다. ( 새로 만든 메서드가 이미 정의되어 있다면 오류가 나지는 않겠지만...)

* 자바 8 이후
	* 디폴트메서드 선언 가능
	* 디폴트메서드를 따로 구현하지 않았지만 모든 클래스에서 디폴트 구현이 쓰게 된다.
	* 컬랙션 인터페이스들에 다수의 디폴트 메서드가 추가되었다 -> 람다 활용 목적
	* 코드 품질이 높지만, 모든 상황에서 불변식을 해치지 않는 디폴트 메서드는 아니다.

#### 인터페이스 디폴트 메서드 예시
```java
default boolean removeIf(Predicate<? super E> filter) {
  Objects.requireNonNull(filter);
  boolean result = false;
  for(Iterator<E> it = iterator(); it.hasNext();) {
    if(filter.test(it.next())) {
      it.remove();
      result = true;
    }
  }
  return result;
}
```
* 매우 범용적으로 구현되어 있는 코드이다.
* 하지만, 동기화가 필요한 아팟치의 SychronizedCollection 클래스 같은 경우는 재정의가 필요하다.
	* -> 모든 메서드에서 주어진 락 객체로 동기환 후 내부 컬렉션 객체에 기능을 위임(래퍼클래스)



#### 인터페이스 디폴트 메서드의 문제점
* 디폴트 메서드가 기존 구현체에 런타임 오류를 일으킬 수 있다.
	* 기존 구현채와 디폴트 메서드가 총돌할 수 있다.
* 디폴트 메서드는 인터페이스로부터 메서드를 제거하거나 기존 메서드의 시그니처를 수정하는 용도가 아님을 명시해야 한다.



